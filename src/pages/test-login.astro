<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Supabase Test</title>
  </head>

  <body style="padding: 40px; font-family: sans-serif">
    <h1>Supabase Client Test</h1>

    <input id="email" placeholder="email" />
    <br /><br />
    <input id="password" type="password" placeholder="password" />
    <br /><br />
    <button id="login">Login</button>

    <pre id="output"></pre>

    <script type="module">
      import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

      const supabase = createClient(
        import.meta.env.PUBLIC_SUPABASE_URL,
        import.meta.env.PUBLIC_SUPABASE_ANON_KEY
      );

      const out = document.getElementById("output");

      document.getElementById("login").onclick = async () => {
        out.textContent = "Logging in...";

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        const { data, error } =
          await supabase.auth.signInWithPassword({ email, password });

        if (error) {
          out.textContent = "ERROR:\n" + error.message;
        } else {
          out.textContent = "SUCCESS:\n" + JSON.stringify(data, null, 2);
        }
      };
    </script>
  </body>
</html>
